<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<!-- –ú–µ—Ç–∞—Ç–µ–≥ –¥–ª—è –º–æ–±–∏–ª–æ–∫ -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–ë–æ–π–∫–æ—Ç-—Å–ø—Ä–∏–Ω—Ç</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    background: #000;
    height: 100%;
    overflow: hidden;
}

#game {
    position: relative;
    width: 360px;
    height: 640px;
    margin: auto;
    background: url("background.png") center / cover no-repeat;
    overflow: hidden;
}

/* –ù–ê–ß–ê–õ–¨–ù–ê–Ø –ó–ê–°–¢–ê–í–ö–ê */
#splashScreen {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: url("splash-screen.png") center / cover no-repeat;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    z-index: 3000;
    font-family: sans-serif;
}

#splashScreen .start-button {
    margin-bottom: 60px;
    padding: 15px 40px;
    font-size: 1.5em;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 15px;
    cursor: pointer;
    font-weight: bold;
    transition: transform 0.2s, background 0.2s;
}
#splashScreen .start-button:hover {
    background: #45a049;
    transform: scale(1.05);
}

#splashScreen .instruction {
    color: white;
    text-align: center;
    margin-bottom: 20px;
    background: rgba(0, 0, 0, 0.7);
    padding: 10px 20px;
    border-radius: 10px;
    font-size: 1.1em;
}

/* –°–£–ú–ö–ê - —É–≤–µ–ª–∏—á–µ–Ω–∞ –¥–æ 100px */
#bag {
    position: absolute;
    bottom: 110px;
    width: 100px; /* –£–í–ï–õ–ò–ß–ï–ù–û –° 80px */
    transition: left 0.15s linear;
}

/* –ø–∞–¥–∞—é—â–∏–µ –æ–±—ä–µ–∫—Ç—ã */
.falling {
    position: absolute;
    top: -60px;
    width: 60px;
}

/* –∂–∏–∑–Ω–∏ */
#lives {
    position: absolute;
    top: 10px;
    left: 10px;
    display: flex;
    gap: 6px;
}
.life {
    width: 18px;
    height: 18px;
    background: red;
    border-radius: 50%;
    opacity: 1;
}
.life.dead {
    opacity: 0.25;
}

/* –°—á—ë—Ç—á–∏–∫ –∫–æ—Ç–∏–∫–æ–≤ */
#score {
    position: absolute;
    top: 10px;
    right: 10px;
    display: flex;
    align-items: center;
    gap: 4px;
    color: white;
    font-size: 22px;
    font-weight: bold;
    font-family: sans-serif;
    text-shadow: 2px 2px 2px black;
    padding: 4px 12px;
    background: rgba(0, 0, 0, 0.7);
    border-radius: 20px;
    white-space: nowrap;
    pointer-events: none;
    z-index: 1000;
}

/* –ö–Ω–æ–ø–∫–∞ –ø–∞—É–∑—ã */
#pauseButton {
    position: absolute;
    bottom: 10px;
    left: 10px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 8px 15px;
    border-radius: 20px;
    cursor: pointer;
    z-index: 100;
    font-family: sans-serif;
    font-size: 14px;
    border: none;
    user-select: none;
}
#pauseButton:hover {
    background: rgba(0, 0, 0, 0.9);
}

#scoreEmoji {
    font-size: 26px;
}

/* –≠–∫—Ä–∞–Ω –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã */
#endScreen {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.95);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
    text-align: center;
    z-index: 2000;
    font-family: sans-serif;
}
#endScreen h1 { font-size: 3em; margin-bottom: 20px; }
#endScreen p { font-size: 1.5em; margin: 10px 0; }
#restartButton {
    margin-top: 30px;
    padding: 12px 30px;
    font-size: 1.2em;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
}
#restartButton:hover { background: #45a049; }

/* –°—Ç–∏–ª—å –¥–ª—è –ø–æ–±–µ–¥—ã */
.win-style h1 { color: #FFD700; }
/* –°—Ç–∏–ª—å –¥–ª—è –ø–æ—Ä–∞–∂–µ–Ω–∏—è */
.lose-style h1 { color: #FF6B6B; }

/* –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ –ø—Ä–∏ –ø–∞—É–∑–µ */
.paused { filter: brightness(0.5); }

/* –°—Ç–∏–ª–∏ –¥–ª—è Telegram —Å—Å—ã–ª–∫–∏ */
.telegram-link {
    color: #0088cc !important;
    text-decoration: none;
    font-weight: bold;
    transition: color 0.2s;
}
.telegram-link:hover {
    color: #006699 !important;
    text-decoration: underline;
}

/* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –î–õ–Ø –ú–û–ë–ò–õ–û–ö */
@media (max-width: 400px) {
    #game {
        width: 100vw;
        height: 100vh;
        max-width: 360px;
        max-height: 640px;
        margin: 0 auto;
    }
    
    #score {
        font-size: 18px;
        padding: 3px 10px;
        right: 5px;
    }
    
    /* –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è —Å—É–º–∫–∞ –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö */
    #bag {
        width: 110px; /* –ï—â—ë –±–æ–ª—å—à–µ –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö */
        bottom: 110px;
    }
    
    /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ç–∞–ø–∞ */
    #pauseButton {
        padding: 12px 20px;
        font-size: 16px;
    }
    
    .start-button {
        padding: 20px 50px !important;
        font-size: 1.8em !important;
    }
}
</style>
</head>

<body>

<div id="game">
    <!-- –ù–ê–ß–ê–õ–¨–ù–ê–Ø –ó–ê–°–¢–ê–í–ö–ê -->
    <div id="splashScreen">
        <div class="instruction">–°–æ–±–∏—Ä–∞–π –∫–æ—Ç–∏–∫–æ–≤, –∏–∑–±–µ–≥–∞–π –º—É—Å–æ—Ä–∞!<br>–ù–∞–∂–º–∏ –Ω–∞ –ª–µ–≤—É—é –∏–ª–∏ –ø—Ä–∞–≤—É—é –ø–æ–ª–æ–≤–∏–Ω—É —ç–∫—Ä–∞–Ω–∞</div>
        <button class="start-button">‚ñ∂Ô∏è –ù–ê–ß–ê–¢–¨ –ò–ì–†–£</button>
    </div>

    <img id="bag" src="bag.png">

    <div id="lives">
        <div class="life"></div>
        <div class="life"></div>
        <div class="life"></div>
    </div>
    
    <div id="score">
        <span id="scoreEmoji">üê±</span>
        <span id="scoreValue">0</span>
    </div>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –ø–∞—É–∑—ã -->
    <button id="pauseButton">‚è∏Ô∏è –ü–∞—É–∑–∞</button>
    
    <!-- –≠–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã/–ø–æ—Ä–∞–∂–µ–Ω–∏—è -->
    <div id="endScreen" style="display: none;">
        <h1 id="endTitle">üéâ –ü–û–ë–ï–î–ê!</h1>
        <p>–¢—ã —Å–æ–±—Ä–∞–ª <span id="finalScore">0</span> –∫–æ—Ç–∏–∫–æ–≤</p>
        <p><em>–¢–≤–æ–π –ë–æ–π–∫–æ—Ç –∂–¥—ë—Ç</em></p>
        <button id="restartButton">–ò–≥—Ä–∞—Ç—å –µ—â—ë</button>
        <p style="font-size: 14px; margin-top: 20px;">
            <a href="https://t.me/bojkotbags" target="_blank" class="telegram-link">@bojkotbags</a>
        </p>
    </div>
</div>

<script>
const game = document.getElementById("game");
const bag = document.getElementById("bag");
const livesEls = document.querySelectorAll(".life");
const pauseButton = document.getElementById("pauseButton");
const endScreen = document.getElementById("endScreen");
const endTitle = document.getElementById("endTitle");
const finalScoreEl = document.getElementById("finalScore");
const restartButton = document.getElementById("restartButton");

// –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞—Å—Ç–∞–≤–∫–∏
const splashScreen = document.getElementById("splashScreen");
const startButton = document.querySelector(".start-button");

const cats = ["cat1.png", "cat2.png", "cat3.png"];
const trash = ["trash1.png", "trash2.png", "trash3.png"];

// –ó–í–£–ö–ò
const meowSound = new Audio("meow.wav");
const trashSound = new Audio("trash.wav");

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–≤—É–∫–æ–≤
meowSound.volume = 0.7;
trashSound.volume = 0.5;
meowSound.preload = "auto";
trashSound.preload = "auto";

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏—è –∑–≤—É–∫–∞
function playSound(sound) {
    if (!soundEnabled) return;
    
    sound.currentTime = 0;
    sound.play().catch(e => {
        // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
        console.log("–ó–≤—É–∫ –Ω–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥—ë–Ω");
    });
}

const LEFT_X = 60;
const RIGHT_X = 220;

let bagLane = "left";
let lives = 3;
let score = 0;
let active = false;
let paused = false;
let gameStarted = false;
let soundEnabled = true; // –§–ª–∞–≥ –≤–∫–ª—é—á–µ–Ω–∏—è –∑–≤—É–∫–æ–≤

/* –°–ß–Å–¢–ß–ò–ö */
const scoreValueEl = document.getElementById("scoreValue");

/* –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã */
function initGame() {
    bag.style.bottom = "110px";
    bag.style.left = LEFT_X + "px";
    scoreValueEl.textContent = "0";
    livesEls.forEach(life => life.classList.remove("dead"));
}

/* –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã —Å –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞—Å—Ç–∞–≤–∫–∏ */
startButton.addEventListener("click", () => {
    splashScreen.style.display = "none";
    active = true;
    gameStarted = true;
    soundEnabled = true; // –í–∫–ª—é—á–∞–µ–º –∑–≤—É–∫–∏ –ø–æ—Å–ª–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
    
    // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∑–≤—É–∫–æ–≤ –¥–ª—è –º–æ–±–∏–ª–æ–∫
    meowSound.load();
    trashSound.load();
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–ø–∞–≤–Ω –æ–±—ä–µ–∫—Ç–æ–≤
    if (!spawnInterval) {
        spawnInterval = setInterval(spawnObject, 1100);
    }
});

/* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏–µ–º */
game.addEventListener("click", (e) => {
    if (!active || paused || !gameStarted) return;
    if (e.target.id === "pauseButton") return;
    
    const x = e.clientX - game.getBoundingClientRect().left;
    if (x < game.clientWidth / 2) moveBag("left");
    else moveBag("right");
});

function moveBag(side) {
    if (paused || !active || !gameStarted) return;
    bagLane = side;
    bag.style.left = (side === "left" ? LEFT_X : RIGHT_X) + "px";
}

/* –ü–∞—É–∑–∞ */
pauseButton.addEventListener("click", (e) => {
    if (!gameStarted) return;
    
    e.stopPropagation();
    paused = !paused;
    pauseButton.textContent = paused ? "‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" : "‚è∏Ô∏è –ü–∞—É–∑–∞";
    game.classList.toggle("paused", paused);
});

/* –°–ø–∞–≤–Ω –æ–±—ä–µ–∫—Ç–æ–≤ */
function spawnObject() {
    if (!active || paused || !gameStarted) return;

    const obj = document.createElement("img");
    const isCat = Math.random() < 0.6;

    obj.src = isCat
        ? cats[Math.floor(Math.random() * cats.length)]
        : trash[Math.floor(Math.random() * trash.length)];

    obj.dataset.type = isCat ? "cat" : "trash";
    obj.className = "falling";

    const lane = Math.random() < 0.5 ? "left" : "right";
    obj.style.left = (lane === "left" ? LEFT_X + 10 : RIGHT_X + 10) + "px";

    game.appendChild(obj);

    let y = -60;
    const fall = setInterval(() => {
        if (!active || paused || !gameStarted) {
            clearInterval(fall);
            obj.remove();
            return;
        }

        y += 2;
        obj.style.top = y + "px";

        if (checkCollision(obj)) {
            clearInterval(fall);
            if (obj.dataset.type === "trash") {
                loseLife();
                playSound(trashSound);
            } else {
                score++;
                scoreValueEl.textContent = score;
                playSound(meowSound);
                if (score >= 10) showEndScreen(true);
            }
            obj.remove();
        }

        if (y > game.clientHeight) {
            clearInterval(fall);
            if (obj.dataset.type === "cat") loseLife();
            obj.remove();
        }
    }, 16);
}

/* –ö–æ–ª–ª–∏–∑–∏—è */
function checkCollision(obj) {
    const b = bag.getBoundingClientRect();
    const o = obj.getBoundingClientRect();

    return !(
        o.bottom < b.top ||
        o.top > b.bottom ||
        o.right < b.left ||
        o.left > b.right
    );
}

/* –ñ–∏–∑–Ω–∏ */
function loseLife() {
    lives--;
    if (lives >= 0) livesEls[lives].classList.add("dead");
    if (lives <= 0) showEndScreen(false);
}

/* –≠–∫—Ä–∞–Ω –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã */
function showEndScreen(isWin) {
    active = false;
    paused = true;
    pauseButton.textContent = "‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å";
    game.classList.add("paused");
    
    finalScoreEl.textContent = score;

    if (isWin) {
        endTitle.textContent = "üéâ –ü–û–ë–ï–î–ê!";
        endScreen.className = "win-style";
    } else {
        endTitle.textContent = "üí• GAME OVER";
        endScreen.className = "lose-style";
    }

    endScreen.style.display = "flex";
}

/* –†–µ—Å—Ç–∞—Ä—Ç –∏–≥—Ä—ã */
restartButton.addEventListener("click", () => {
    // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
    active = true;
    paused = false;
    gameStarted = true;
    score = 0;
    lives = 3;
    bagLane = "left";
    
    // –°–±—Ä–æ—Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    initGame();
    pauseButton.textContent = "‚è∏Ô∏è –ü–∞—É–∑–∞";
    game.classList.remove("paused");
    
    // –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–∞–¥–∞—é—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
    document.querySelectorAll(".falling").forEach(obj => obj.remove());
    
    // –°–∫—Ä—ã—Ç–∏–µ —ç–∫—Ä–∞–Ω–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è
    endScreen.style.display = "none";
    
    // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–ø–∞–≤–Ω–∞
    clearInterval(spawnInterval);
    spawnInterval = setInterval(spawnObject, 1100);
});

/* –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ */
initGame();

// –ù–µ –∑–∞–ø—É—Å–∫–∞–µ–º —Å–ø–∞–≤–Ω –æ–±—ä–µ–∫—Ç–æ–≤ —Å—Ä–∞–∑—É - –∂–¥–µ–º –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É"
let spawnInterval = null;
</script>

</body>
</html>
